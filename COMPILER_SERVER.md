# Java Code Arena - Unified Server Setup

## Quick Start

### Option 1: Automated Startup (Windows)
Simply double-click `start.bat`:
```
start.bat
```
This will automatically:
1. Install Node dependencies
2. Build the React frontend
3. Setup Python environment
4. Start the unified server

Then open: **http://localhost:5000**

### Option 2: Automated Startup (Linux/Mac)
```bash
chmod +x start.sh
./start.sh
```

## Manual Setup

### Prerequisites
1. **Java Development Kit (JDK)** installed on your system
   - Windows: Download from [Oracle](https://www.oracle.com/java/technologies/downloads/) or [OpenJDK](https://openjdk.org/install/)
   - Linux: `sudo apt-get install openjdk-17-jdk` (Ubuntu/Debian)
   - Mac: `brew install openjdk`

2. **Node.js 16+** installed

3. **Python 3.7+** installed

### Step-by-Step Installation

1. **Install Node Dependencies:**
   ```bash
   npm install
   ```

2. **Build React Frontend:**
   ```bash
   npm run build
   ```

3. **Install Python Dependencies:**
   ```bash
   pip install -r requirements.txt
   ```
   Or with virtual environment:
   ```bash
   python -m venv .venv
   source .venv/bin/activate  # On Windows: .venv\Scripts\activate
   pip install -r requirements.txt
   ```

4. **Start the Unified Server:**
   ```bash
   python server.py
   ```

   You should see:
   ```
   Java Compiler Server - Detected OS: Windows/Linux/Darwin
   ✓ Java compiler found and ready
   Starting unified server on http://localhost:5000
   Serving React frontend + Java Compiler API
   ```

5. **Open your browser:**
   - http://localhost:5000

## How It Works

### Unified Server Architecture
- **Python Flask Server** on port 5000 serves:
  - React frontend (static files from `dist/` folder)
  - Java Compiler API endpoints (`/api/*`)

### Single Server Features
- ✅ Automatic OS detection (Windows, Linux, Mac)
- ✅ Checks for Java compiler availability
- ✅ Compiles and runs Java code
- ✅ Returns output to frontend
- ✅ Serves frontend on same port as API

### How It's Different From Dev Mode
- **Development**: You'd run `npm run dev` + `python server.py` separately
- **Production**: Single `python server.py` serves everything

## Development vs Production

### For Development (with live reload):
```bash
# Terminal 1: Watch and rebuild React
npm run dev

# Terminal 2: Run Python server
python server.py
```
Frontend auto-reloads on code changes, but you need 2 terminals.

### For Production (recommended):
```bash
npm run build
python server.py
```
Everything runs on one command. No auto-reload, but simpler.

## API Endpoints

### GET `/api/health`
Check server status
```bash
curl http://localhost:5000/api/health
```

### POST `/api/compile`
Compile and run Java code
```bash
curl -X POST http://localhost:5000/api/compile \
  -H "Content-Type: application/json" \
  -d '{"code":"public class Main { public static void main(String[] args) { System.out.println(\"Hello\"); } }"}'
```

### GET `/api/info`
Get server information
```bash
curl http://localhost:5000/api/info
```

## Troubleshooting

### "Java compiler not found"
- Install JDK (not just JRE)
- Restart your terminal after installing

### "Frontend not built yet"
```bash
npm run build
python server.py
```

### Port 5000 already in use
Edit `server.py` and change:
```python
app.run(debug=False, host="0.0.0.0", port=5000)  # Change 5000 to another port
```

### Python module not found
```bash
pip install -r requirements.txt
```

## Testing

Try this Java code in the editor:
```java
public class Main {
    public static void main(String[] args) {
        System.out.println("Hello from Java!");
        int sum = 0;
        for (int i = 1; i <= 10; i++) {
            sum += i;
        }
        System.out.println("Sum of 1-10 = " + sum);
    }
}
```

Click Run and you should see the output!

## File Structure

```
Java-Code-Arena/
├── src/                    # React source code
├── dist/                   # Built React app (generated by npm run build)
├── server.py              # Flask backend
├── start.bat              # Windows startup script
├── start.sh               # Linux/Mac startup script
├── requirements.txt       # Python dependencies
└── package.json           # Node dependencies
```

## Supported Platforms

- ✅ **Windows** - Detects JDK in Program Files
- ✅ **Linux** - Looks for javac in /usr/bin, /usr/local/bin
- ✅ **Mac** - Same detection as Linux

## Performance Notes

- Java compilation happens on the server (not in browser)
- Execution timeout: 10 seconds
- Output is real-time from actual Java execution
- Works with classes that use standard I/O only

